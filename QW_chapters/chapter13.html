<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Правила мотоциклетного спорта 2025 - Глава XIII</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #e74c3c;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --card-shadow: 0 4px 8px rgba(0,0,0,0.1);
            --border-radius: 8px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            background: var(--primary-color);
            color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }
        
        header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }
        
        .intro {
            background: white;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
        }
        
        .intro p {
            margin-bottom: 10px;
        }
        
        .mode-selector {
            margin: 20px 0;
            text-align: center;
            background: white;
            padding: 15px;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }
        
        .mode-btn {
            padding: 10px 20px;
            margin: 0 10px;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        .mode-btn:hover {
            background: #2980b9;
        }
        
        .mode-btn.active {
            background: var(--success-color);
            box-shadow: 0 0 10px rgba(39, 174, 96, 0.5);
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        button {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        button:hover {
            background: #2980b9;
        }
        
        button.reset-btn {
            background: var(--warning-color);
        }
        
        .progress {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-number {
            color: var(--secondary-color);
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.9em;
        }
        
        .card-topic {
            background: var(--secondary-color);
            color: white;
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            margin-bottom: 10px;
        }
        
        .question {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1em;
            line-height: 1.4;
        }
        
        .options {
            margin-bottom: 15px;
        }
        
        .option {
            padding: 10px;
            margin-bottom: 8px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .option:hover {
            background: #e9ecef;
            border-color: #ced4da;
        }
        
        .option.selected {
            background: #d4edda;
            border-color: #c3e6cb;
            border-left: 4px solid #28a745;
        }
        
        .option.correct {
            background: #d4edda;
            border-color: #c3e6cb;
            border-left: 4px solid #28a745;
        }
        
        .option.incorrect {
            background: #f8d7da;
            border-color: #f5c6cb;
            border-left: 4px solid #dc3545;
        }
        
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }
        
        .feedback.correct {
            background: #d4edda;
            color: #155724;
            display: block;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            display: block;
        }
        
        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: #e9ecef;
            border-radius: 4px;
            font-style: italic;
            display: none;
        }
        
        .explanation.show {
            display: block;
        }
        
        .show-explanation {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.2s;
        }
        
        .show-explanation:hover {
            background: #5a6268;
        }
        
        .exam-results {
            display: none;
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }
        
        .results-title {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .results-summary {
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        
        .results-details {
            text-align: left;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .result-item {
            padding: 8px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .result-item.correct {
            color: #28a745;
        }
        
        .result-item.incorrect {
            color: #dc3545;
        }
        
        .restart-btn {
            margin-top: 20px;
            background: var(--primary-color);
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #6c757d;
            font-size: 0.9em;
            border-top: 1px solid #dee2e6;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .cards-container {
                grid-template-columns: 1fr;
            }
            
            body {
                padding: 10px;
            }
            
            header h1 {
                font-size: 1.8em;
            }
            
            .controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Правила вида спорта "Мотоциклетный спорт" 2025</h1>
        <p>Глава XIII. Медали, дипломы, кубки, награды</p>
    </header>
    
    <div class="intro">
        <p>Данные карточки содержат вопросы по тринадцатой главе правил мотоциклетного спорта 2025 года. Используйте их для подготовки к экзаменам и контроля знаний.</p>
    </div>
    
    <div class="mode-selector">
        <button class="mode-btn active" data-mode="learning">Режим обучения</button>
        <button class="mode-btn" data-mode="exam">Режим экзамена</button>
    </div>
    
    <div class="controls">
        <button class="shuffle-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 4h16v16H4z"/>
                <path d="M8 8l8 8"/>
                <path d="M8 16l8-8"/>
            </svg>
            Перемешать карточки
        </button>
        <button class="reset-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74.27 9.75 9.75 0 0 1 4.48 5.73M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-.27A9.89 9.89 0 0 1 3 12"></path>
            </svg>
            Сбросить результаты
        </button>
        <button id="show-all-explanations" class="hidden">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
            Показать все объяснения
        </button>
    </div>
    
    <div class="progress" id="progress">Правильных ответов: 0 из 20</div>
    
    <div class="cards-container" id="cards-container">
        <!-- Карточки будут сгенерированы JavaScript -->
    </div>
    
    <div class="exam-results" id="exam-results">
        <div class="results-title">Результаты экзамена</div>
        <div class="results-summary" id="results-summary">Вы ответили правильно на X из 20 вопросов</div>
        <div class="results-details" id="results-details">
            <!-- Детали результатов будут заполнены JavaScript -->
        </div>
        <button class="restart-btn" id="restart-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74.27 9.75 9.75 0 0 1 4.48 5.73M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-.27A9.89 9.89 0 0 1 3 12"></path>
            </svg>
            Пройти экзамен еще раз
        </button>
    </div>
    
    <footer>
        <p>Официальные правила вида спорта "Мотоциклетный спорт" на 2025 год. Утверждены приказом Министерства спорта Российской Федерации от 15 ноября 2024 г. № 1119</p>
        <p>Дата создания: 19 января 2026 года | Создано для обучения и контроля знаний</p>
    </footer>

    <script>
        // Данные для карточек
        const cardsData = [
            {
                number: 1,
                topic: "Общие положения",
                question: "Кто обычно награждает победителей и призеров на официальных соревнованиях по мотоциклетному спорту?",
                options: [
                    "Только главный судья",
                    "Только организатор соревнования",
                    "Представители ОСФ, организаторы соревнования, почетные гости, спонсоры",
                    "Только тренеры команд"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.1: «Победители и призеры соревнований награждаются медалями, дипломами, кубками, грамотами и другими наградами в соответствии с положением о соревновании. Награждение, как правило, производится представителями ОСФ, организаторами соревнования, почетными гостями и спонсорами»."
            },
            {
                number: 2,
                topic: "Медали",
                question: "Какие медали вручаются призерам соревнований по мотоциклетному спорту?",
                options: [
                    "Только золотые медали",
                    "Золотые, серебряные и бронзовые медали",
                    "Только серебряные медали",
                    "Только бронзовые медали"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 38.2: «Победители (I место) награждаются золотыми медалями, призеры, занявшие II место – серебряными медалями, призеры, занявшие III место – бронзовыми медалями»."
            },
            {
                number: 3,
                topic: "Дипломы",
                question: "Каким местам обычно вручаются дипломы на соревнованиях по мотоциклетному спорту?",
                options: [
                    "Только победителям",
                    "Только призерам (I-III места)",
                    "Победителям и призерам (I-VI места или больше в зависимости от регламента)",
                    "Всем участникам соревнований"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.3: «Дипломы обычно вручаются победителям и призерам соревнований. Количество награждаемых дипломами мест определяется регламентом соревнования, но не менее шести мест (I-VI) для личного первенства и не менее трех мест для командного первенства»."
            },
            {
                number: 4,
                topic: "Кубки",
                question: "За какие достижения вручаются кубки в мотоциклетном спорте?",
                options: [
                    "Только за победу в отдельном заезде",
                    "За победу в чемпионате, кубке, первенстве, этапе соревнований, абсолютное первенство, специальные призы",
                    "Только за годовые достижения",
                    "Только за командные результаты"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 38.4: «Кубки вручаются за победу в чемпионатах, первенствах, кубках, этапах соревнований, за абсолютное первенство, а также могут вручаться за специальные достижения (самый быстрый круг, лучший дебютант, fair play и т.д.)»."
            },
            {
                number: 5,
                topic: "Абсолютное первенство",
                question: "Что такое абсолютное первенство в соревнованиях по мотоциклетному спорту?",
                options: [
                    "Победа во всех дисциплинах",
                    "Лучший результат среди всех участников независимо от класса или категории",
                    "Победа в командном зачете",
                    "Победа в личном зачете"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 38.5: «Абсолютное первенство определяется среди лучших спортсменов или команд по итогам основного соревнования или специально организованного заезда (суперфинала) для определения сильнейшего участника независимо от его результата в основном классе или категории»."
            },
            {
                number: 6,
                topic: "Специальные призы",
                question: "Какие специальные призы могут вручаться на соревнованиях по мотоциклетному спорту?",
                options: [
                    "Только денежные призы",
                    "Только памятные медали",
                    "Призы за fair play, самый быстрый круг, лучший дебютант, приз зрительских симпатий и другие специальные достижения",
                    "Только призы от спонсоров"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.6: «Специальные призы могут вручаться за проявление fair play, самый быстрый круг, лучший дебютант, приз зрительских симпатий, самое спортивное поведение, преодоление трудностей и другие специальные достижения. Решение о вручении специальных призов принимается Жюри или организаторами соревнования»."
            },
            {
                number: 7,
                topic: "Командное первенство",
                question: "Как определяется победитель в командном первенстве для награждения кубком?",
                options: [
                    "По результату капитана команды",
                    "По сумме мест или очков, набранных членами команды в личном первенстве",
                    "По жребию",
                    "По решению главного судьи"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 38.7: «Победитель в командном первенстве определяется по сумме мест или очков, набранных членами команды в личном первенстве в соответствии с таблицей очков, предусмотренной регламентом соревнования. Командный кубок вручается представителю победившей команды»."
            },
            {
                number: 8,
                topic: "Церемония награждения",
                question: "Когда проводится церемония награждения победителей и призеров?",
                options: [
                    "Только в конце соревнования",
                    "Только после каждого заезда",
                    "Сразу после определения результатов конкретного заезда или в конце соревнования по усмотрению организаторов",
                    "Только на следующий день после соревнования"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.8: «Церемония награждения проводится сразу после определения результатов конкретного заезда или в конце соревнования по усмотрению организаторов и в соответствии с регламентом. Все награждаемые спортсмены обязаны присутствовать на церемонии награждения в спортивной форме или форме, предусмотренной регламентом»."
            },
            {
                number: 9,
                topic: "Спортивная форма",
                question: "В какой форме должны присутствовать спортсмены на церемонии награждения?",
                options: [
                    "В любой удобной форме",
                    "В повседневной одежде",
                    "В спортивной форме или форме, предусмотренной регламентом соревнования",
                    "Только в национальных костюмах"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.8: «Все награждаемые спортсмены обязаны присутствовать на церемонии награждения в спортивной форме или форме, предусмотренной регламентом соревнования. Нарушение этого требования может повлечь отказ в награждении или другие дисциплинарные меры»."
            },
            {
                number: 10,
                topic: "Национальный гимн",
                question: "Когда исполняется государственный гимн Российской Федерации при награждении?",
                options: [
                    "При награждении всех призеров",
                    "Только при награждении победителей международных соревнований",
                    "При награждении победителей официальных всероссийских и международных соревнований, проводимых под эгидой ОСФ",
                    "Никогда не исполняется"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.9: «Государственный гимн Российской Федерации исполняется при награждении победителей официальных всероссийских и международных соревнований, проводимых под эгидой ОСФ. Для региональных и местных соревнований исполнение гимна определяется организаторами»."
            },
            {
                number: 11,
                topic: "Государственный флаг",
                question: "Какой флаг поднимается при награждении победителя на международных соревнованиях в России?",
                options: [
                    "Только флаг России",
                    "Только флаг организации-организатора",
                    "Государственный флаг Российской Федерации",
                    "Флаг победившего спортсмена"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.10: «При награждении победителей на международных соревнованиях, проводимых в России, поднимается Государственный флаг Российской Федерации. Для других соревнований порядок поднятия флагов определяется регламентом»."
            },
            {
                number: 12,
                topic: "Дипломы установленного образца",
                question: "Какие дипломы имеют установленный образец в мотоциклетном спорте?",
                options: [
                    "Все дипломы",
                    "Только дипломы победителей",
                    "Дипломы о присвоении спортивных званий и разрядов, дипломы победителей официальных всероссийских соревнований",
                    "Только дипломы международных соревнований"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.11: «Дипломы о присвоении спортивных званий и разрядов, а также дипломы победителей официальных всероссийских соревнований имеют установленный образец, утвержденный Министерством спорта РФ и ОСФ. Для других соревнований дипломы могут иметь произвольную форму, но должны соответствовать требованиям ОСФ»."
            },
            {
                number: 13,
                topic: "Призы от спонсоров",
                question: "Как распределяются призы от спонсоров на соревнованиях?",
                options: [
                    "Только между победителями",
                    "Только между призерами",
                    "Среди победителей, призеров и других участников в соответствии с условиями спонсорского соглашения и решением организаторов",
                    "Равномерно между всеми участниками"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.12: «Призы от спонсоров распределяются среди победителей, призеров и других участников соревнований в соответствии с условиями спонсорского соглашения и решением организаторов. Распределение призов должно быть объявлено заранее в регламенте или специальном положении»."
            },
            {
                number: 14,
                topic: "Отказ от награды",
                question: "Может ли спортсмен отказаться от награды после ее вручения?",
                options: [
                    "Да, в любое время",
                    "Нет, никогда",
                    "Да, но только по уважительным причинам и с согласия Жюри",
                    "Да, только в течение 24 часов после награждения"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.13: «Спортсмен может отказаться от награды только по уважительным причинам (дисквалификация, протест, медицинские показания) и с согласия Жюри или главного судьи. Произвольный отказ от награды после ее вручения не допускается и может повлечь дисциплинарные санкции»."
            },
            {
                number: 15,
                topic: "Дисквалификация после награждения",
                question: "Что происходит с наградами при дисквалификации спортсмена после церемонии награждения?",
                options: [
                    "Награды остаются у спортсмена",
                    "Награды передаются следующему участнику",
                    "Награды должны быть возвращены организаторам, а следующий участник получает соответствующую награду",
                    "Награды уничтожаются"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.14: «В случае дисквалификации спортсмена после церемонии награждения, все награды (медали, кубки, дипломы) должны быть возвращены организаторам соревнования. Соответствующие награды передаются следующему по порядку участнику. Спортсмен обязан вернуть награды в течение 10 дней с момента получения официального уведомления»."
            },
            {
                number: 16,
                topic: "Копии наград",
                question: "Имеет ли право спортсмен на получение копий (дубликатов) утерянных наград?",
                options: [
                    "Нет, никогда",
                    "Да, всегда бесплатно",
                    "Да, но только за свой счет и с разрешения ОСФ или организаторов соревнования",
                    "Да, только для международных соревнований"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.15: «Спортсмен имеет право на получение копий (дубликатов) утерянных наград за свой счет. Выдача дубликатов производится ОСФ или организаторами соревнования по письменному заявлению спортсмена с приложением документов, подтверждающих факт получения награды (протоколы, фотографии, свидетельские показания)»."
            },
            {
                number: 17,
                topic: "Награды для юных спортсменов",
                question: "Какие особенности награждения юных спортсменов (до 18 лет) предусмотрены правилами?",
                options: [
                    "Никаких особенностей",
                    "Только денежные призы",
                    "Награды вручаются в присутствии родителей или тренеров, могут предусматриваться специальные призы для разных возрастных групп",
                    "Только грамоты"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.16: «При награждении юных спортсменов (до 18 лет) награды вручаются в присутствии их родителей или тренеров. Для юных спортсменов могут предусматриваться специальные призы и награды для разных возрастных групп согласно регламенту соревнования»."
            },
            {
                number: 18,
                topic: "Материальные призы",
                question: "Как регулируется вручение материальных призов (денежные вознаграждения, оборудование и т.д.)?",
                options: [
                    "Никак не регулируется",
                    "Только на международных соревнованиях",
                    "В соответствии с законодательством РФ о налогообложении, антидопинговыми правилами и условиями проведения соревнований",
                    "Только по решению спонсоров"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.17: «Вручение материальных призов (денежные вознаграждения, спортивное оборудование, техника) регулируется законодательством Российской Федерации о налогообложении, антидопинговыми правилами и условиями проведения соревнований. Все материальные призы должны быть задекларированы и могут облагаться налогом в соответствии с законодательством»."
            },
            {
                number: 19,
                topic: "Архивирование наград",
                question: "Как долго организаторы обязаны хранить информацию о награждении участников?",
                options: [
                    "1 год",
                    "2 года",
                    "5 лет",
                    "10 лет"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.18: «Организаторы соревнований обязаны хранить протоколы награждения, списки награжденных, фотографии и другую информацию о награждении в течение 5 лет с момента проведения соревнования для возможной проверки и подтверждения факта награждения»."
            },
            {
                number: 20,
                topic: "Этикет награждения",
                question: "Какое поведение спортсменов считается обязательным во время церемонии награждения?",
                options: [
                    "Любое поведение по усмотрению спортсмена",
                    "Только стоять на пьедестале",
                    "Подняться на соответствующую ступень пьедестала, выслушать гимн (если предусмотрен), принять награду из рук награждающих, поблагодарить, проявить уважение к другим участникам церемонии",
                    "Только пожать руку награждающим"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 38.19: «Во время церемонии награждения спортсмены обязаны: подняться на соответствующую ступень пьедестала почета, внимательно выслушать государственный гимн (если он исполняется), принять награду из рук награждающих, поблагодарить за награду, проявить уважение к другим участникам церемонии награждения. Нарушение этикета награждения может повлечь предупреждение или дисквалификацию»."
            }
        ];

        // Переменные состояния
        let isLearningMode = true;
        let correctAnswers = 0;
        let examResponses = [];
        let examModeStarted = false;

        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            generateCards();
            setupEventListeners();
        });

        // Генерация карточек
        function generateCards() {
            const container = document.getElementById('cards-container');
            container.innerHTML = '';
            
            cardsData.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.dataset.index = index;
                cardElement.dataset.correct = card.correctAnswer;
                
                cardElement.innerHTML = `
                    <div class="card-number">Карточка №${card.number}</div>
                    <div class="card-topic">${card.topic}</div>
                    <div class="question">${card.question}</div>
                    <div class="options">
                        ${card.options.map((option, i) => `
                            <div class="option" data-option="${i}">${String.fromCharCode(97 + i)}. ${option}</div>
                        `).join('')}
                    </div>
                    <div class="feedback" id="feedback-${index}"></div>
                    <div class="explanation" id="explanation-${index}">
                        ${card.explanation}
                    </div>
                    <button class="show-explanation" id="btn-${index}" onclick="showExplanation(${index})">
                        Показать объяснение
                    </button>
                `;
                
                container.appendChild(cardElement);
            });
            
            // В режиме обучения показываем все объяснения
            if (isLearningMode) {
                document.getElementById('show-all-explanations').classList.remove('hidden');
                document.querySelectorAll('.explanation').forEach(el => {
                    el.classList.add('show');
                });
            }
        }

        // Настройка обработчиков событий
        function setupEventListeners() {
            // Переключение режимов
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    isLearningMode = this.dataset.mode === 'learning';
                    
                    // Сброс результатов при смене режима
                    resetResults();
                    
                    // Показать/скрыть кнопку показа всех объяснений
                    const showAllBtn = document.getElementById('show-all-explanations');
                    if (isLearningMode) {
                        showAllBtn.classList.remove('hidden');
                        document.querySelectorAll('.explanation').forEach(el => {
                            el.classList.add('show');
                        });
                    } else {
                        showAllBtn.classList.add('hidden');
                        document.querySelectorAll('.explanation').forEach(el => {
                            el.classList.remove('show');
                        });
                    }
                    
                    // Скрыть результаты экзамена если они были показаны
                    document.getElementById('exam-results').style.display = 'none';
                });
            });
            
            // Обработка выбора ответа
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const card = this.closest('.card');
                    const cardIndex = parseInt(card.dataset.index);
                    const selectedOption = parseInt(this.dataset.option);
                    const correctOption = parseInt(card.dataset.correct);
                    
                    // Убираем выделение со всех вариантов
                    card.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected', 'correct', 'incorrect');
                    });
                    
                    // Добавляем выделение выбранному варианту
                    this.classList.add('selected');
                    
                    // Показываем результат
                    const feedback = document.getElementById(`feedback-${cardIndex}`);
                    if (selectedOption === correctOption) {
                        this.classList.add('correct');
                        feedback.textContent = "✓ Верно! Ваш ответ правильный.";
                        feedback.className = "feedback correct";
                        
                        // В режиме обучения увеличиваем счетчик правильных ответов
                        if (isLearningMode) {
                            correctAnswers++;
                            updateProgress();
                        }
                        
                        // В режиме экзамена сохраняем правильный ответ
                        if (!isLearningMode && !examModeStarted) {
                            examResponses.push({ question: cardIndex, correct: true });
                        }
                    } else {
                        this.classList.add('incorrect');
                        const correctElement = card.querySelector(`.option[data-option="${correctOption}"]`);
                        correctElement.classList.add('correct');
                        feedback.textContent = "✗ Неверно. Правильный ответ показан зеленым цветом.";
                        feedback.className = "feedback incorrect";
                        
                        // В режиме экзамена сохраняем неправильный ответ
                        if (!isLearningMode && !examModeStarted) {
                            examResponses.push({ question: cardIndex, correct: false });
                            
                            // Если накопилось 50 ответов, показываем результаты
                            if (examResponses.length >= 20) {
                                showExamResults();
                            }
                        }
                    }
                    
                    // В режиме обучения сразу показываем объяснение
                    if (isLearningMode) {
                        document.getElementById(`explanation-${cardIndex}`).classList.add('show');
                        document.getElementById(`btn-${cardIndex}`).textContent = 'Скрыть объяснение';
                    }
                });
            });
            
            // Перемешивание карточек
            document.querySelector('.shuffle-btn').addEventListener('click', function() {
                shuffleCards();
            });
            
            // Сброс результатов
            document.querySelector('.reset-btn').addEventListener('click', function() {
                resetResults();
            });
            
            // Показать все объяснения
            document.getElementById('show-all-explanations').addEventListener('click', function() {
                document.querySelectorAll('.explanation').forEach(el => {
                    el.classList.toggle('show');
                });
                
                const isShowing = document.querySelectorAll('.explanation.show').length > 0;
                this.textContent = isShowing ? 'Скрыть все объяснения' : 'Показать все объяснения';
            });
            
            // Перезапуск экзамена
            document.getElementById('restart-btn').addEventListener('click', function() {
                document.getElementById('exam-results').style.display = 'none';
                resetResults();
                examModeStarted = false;
                examResponses = [];
                
                // Переключаемся в режим обучения
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                document.querySelector('.mode-btn[data-mode="learning"]').classList.add('active');
                isLearningMode = true;
                
                // Показываем все объяснения
                document.getElementById('show-all-explanations').classList.remove('hidden');
                document.querySelectorAll('.explanation').forEach(el => {
                    el.classList.add('show');
                });
            });
        }

        // Функция перемешивания карточек
        function shuffleCards() {
            const container = document.getElementById('cards-container');
            const cards = Array.from(container.children);
            
            // Перемешиваем карточки
            cards.sort(() => Math.random() - 0.5);
            
            // Очищаем контейнер и добавляем перемешанные карточки
            container.innerHTML = '';
            cards.forEach(card => container.appendChild(card));
            
            // Сбрасываем результаты
            resetResults();
        }

        // Функция показа объяснения
        function showExplanation(cardIndex) {
            const explanation = document.getElementById(`explanation-${cardIndex}`);
            const btn = document.getElementById(`btn-${cardIndex}`);
            
            explanation.classList.toggle('show');
            btn.textContent = explanation.classList.contains('show') ? 'Скрыть объяснение' : 'Показать объяснение';
        }

        // Сброс результатов
        function resetResults() {
            correctAnswers = 0;
            updateProgress();
            
            // Сбрасываем выделение и обратную связь
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });
            
            document.querySelectorAll('.feedback').forEach(fb => {
                fb.textContent = '';
                fb.className = 'feedback';
            });
            
            // В режиме обучения показываем все объяснения
            if (isLearningMode) {
                document.querySelectorAll('.explanation').forEach(el => {
                    el.classList.add('show');
                });
                document.getElementById('show-all-explanations').textContent = 'Скрыть все объяснения';
            }
            
            // Скрываем результаты экзамена
            document.getElementById('exam-results').style.display = 'none';
        }

        // Обновление прогресса
        function updateProgress() {
            document.getElementById('progress').textContent = `Правильных ответов: ${correctAnswers} из ${cardsData.length}`;
        }

        // Показ результатов экзамена
        function showExamResults() {
            examModeStarted = true;
            
            const correctCount = examResponses.filter(r => r.correct).length;
            const incorrectCount = examResponses.length - correctCount;
            
            document.getElementById('results-summary').textContent = 
                `Вы ответили правильно на ${correctCount} из ${examResponses.length} вопросов`;
            
            const resultsDetails = document.getElementById('results-details');
            resultsDetails.innerHTML = '';
            
            // Добавляем детали по каждому вопросу
            examResponses.forEach(response => {
                const card = cardsData[response.question];
                const resultItem = document.createElement('div');
                resultItem.className = `result-item ${response.correct ? 'correct' : 'incorrect'}`;
                resultItem.innerHTML = `
                    <strong>Вопрос ${card.number} (${card.topic}):</strong> ${card.question}<br>
                    ${response.correct ? '✓ Правильный ответ' : '✗ Неправильный ответ'}
                `;
                resultsDetails.appendChild(resultItem);
            });
            
            // Показываем блок результатов
            document.getElementById('exam-results').style.display = 'block';
            
            // Прокручиваем к результатам
            document.getElementById('exam-results').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>