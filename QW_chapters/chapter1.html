<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Правила мотоциклетного спорта 2025 - Глава I</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #e74c3c;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --card-shadow: 0 4px 8px rgba(0,0,0,0.1);
            --border-radius: 8px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            background: var(--primary-color);
            color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }
        
        header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }
        
        .intro {
            background: white;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
        }
        
        .intro p {
            margin-bottom: 10px;
        }
        
        .mode-selector {
            margin: 20px 0;
            text-align: center;
            background: white;
            padding: 15px;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }
        
        .mode-btn {
            padding: 10px 20px;
            margin: 0 10px;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        .mode-btn:hover {
            background: #2980b9;
        }
        
        .mode-btn.active {
            background: var(--success-color);
            box-shadow: 0 0 10px rgba(39, 174, 96, 0.5);
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        button {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        button:hover {
            background: #2980b9;
        }
        
        button.reset-btn {
            background: var(--warning-color);
        }
        
        .progress {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-number {
            color: var(--secondary-color);
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.9em;
        }
        
        .card-topic {
            background: var(--secondary-color);
            color: white;
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            margin-bottom: 10px;
        }
        
        .question {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1em;
            line-height: 1.4;
        }
        
        .options {
            margin-bottom: 15px;
        }
        
        .option {
            padding: 10px;
            margin-bottom: 8px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .option:hover {
            background: #e9ecef;
            border-color: #ced4da;
        }
        
        .option.selected {
            background: #d4edda;
            border-color: #c3e6cb;
            border-left: 4px solid #28a745;
        }
        
        .option.correct {
            background: #d4edda;
            border-color: #c3e6cb;
            border-left: 4px solid #28a745;
        }
        
        .option.incorrect {
            background: #f8d7da;
            border-color: #f5c6cb;
            border-left: 4px solid #dc3545;
        }
        
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }
        
        .feedback.correct {
            background: #d4edda;
            color: #155724;
            display: block;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            display: block;
        }
        
        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: #e9ecef;
            border-radius: 4px;
            font-style: italic;
            display: none;
        }
        
        .explanation.show {
            display: block;
        }
        
        .show-explanation {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.2s;
        }
        
        .show-explanation:hover {
            background: #5a6268;
        }
        
        .exam-results {
            display: none;
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }
        
        .results-title {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .results-summary {
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        
        .results-details {
            text-align: left;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .result-item {
            padding: 8px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .result-item.correct {
            color: #28a745;
        }
        
        .result-item.incorrect {
            color: #dc3545;
        }
        
        .restart-btn {
            margin-top: 20px;
            background: var(--primary-color);
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #6c757d;
            font-size: 0.9em;
            border-top: 1px solid #dee2e6;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .cards-container {
                grid-template-columns: 1fr;
            }
            
            body {
                padding: 10px;
            }
            
            header h1 {
                font-size: 1.8em;
            }
            
            .controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Правила вида спорта "Мотоциклетный спорт" 2025</h1>
        <p>Глава I. Общие положения</p>
    </header>
    
    <div class="intro">
        <p>Данные карточки содержат вопросы по первой главе правил мотоциклетного спорта 2025 года. Используйте их для подготовки к экзаменам и контроля знаний.</p>
    </div>
    
    <div class="mode-selector">
        <button class="mode-btn active" data-mode="learning">Режим обучения</button>
        <button class="mode-btn" data-mode="exam">Режим экзамена</button>
    </div>
    
    <div class="controls">
        <button class="shuffle-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 4h16v16H4z"/>
                <path d="M8 8l8 8"/>
                <path d="M8 16l8-8"/>
            </svg>
            Перемешать карточки
        </button>
        <button class="reset-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74.27 9.75 9.75 0 0 1 4.48 5.73M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-.27A9.89 9.89 0 0 1 3 12"></path>
            </svg>
            Сбросить результаты
        </button>
        <button id="show-all-explanations" class="hidden">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
            Показать все объяснения
        </button>
    </div>
    
    <div class="progress" id="progress">Правильных ответов: 0 из 20</div>
    
    <div class="cards-container" id="cards-container">
        <!-- Карточки будут сгенерированы JavaScript -->
    </div>
    
    <div class="exam-results" id="exam-results">
        <div class="results-title">Результаты экзамена</div>
        <div class="results-summary" id="results-summary">Вы ответили правильно на X из 20 вопросов</div>
        <div class="results-details" id="results-details">
            <!-- Детали результатов будут заполнены JavaScript -->
        </div>
        <button class="restart-btn" id="restart-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74.27 9.75 9.75 0 0 1 4.48 5.73M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-.27A9.89 9.89 0 0 1 3 12"></path>
            </svg>
            Пройти экзамен еще раз
        </button>
    </div>
    
    <footer>
        <p>Официальные правила вида спорта "Мотоциклетный спорт" на 2025 год. Утверждены приказом Министерства спорта Российской Федерации от 15 ноября 2024 г. № 1119</p>
        <p>Дата создания: 19 января 2026 года | Создано для обучения и контроля знаний</p>
    </footer>

    <script>
        // Данные для карточек
        const cardsData = [
            {
                number: 1,
                topic: "Общие положения",
                question: "Кто разрабатывает Правила вида спорта «мотоциклетный спорт»?",
                options: [
                    "Министерство спорта Российской Федерации",
                    "Общероссийская спортивная федерация по виду спорта «мотоциклетный спорт» (ОСФ)",
                    "Международная мотоциклетная федерация FIM",
                    "Исполком ОСФ и Спортивный комитет ОСФ"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 1: «Настоящие правила вида спорта «мотоциклетный спорт» (далее – Правила) разработаны общероссийской спортивной федерацией по виду спорта «мотоциклетный спорт» (далее – ОСФ) с учетом правил и Спортивного кодекса Международной мотоциклетной федерации FIM (далее – ФИМ), и особенностей национального мотоспорта»."
            },
            {
                number: 2,
                topic: "Общие положения",
                question: "На какие соревнования распространяются настоящие Правила?",
                options: [
                    "Только на международные соревнования",
                    "Только на официальные всероссийские соревнования",
                    "На все соревнования, включенные в календарный план ОСФ по виду спорта «мотоциклетный спорт»",
                    "На все соревнования, проводимые на территории Российской Федерации"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 2: «Настоящие Правила являются обязательными для всех организаций, проводящих соревнования, включенные в Единый календарный план межрегиональных, всероссийских и международных физкультурных мероприятий, и спортивных мероприятий, физкультурных мероприятий и спортивных мероприятий субъектов Российской Федерации, муниципальных образований, городских округов и календарю ОСФ по виду спорта «мотоциклетный спорт» (далее – соревнования) на территории Российской Федерации»."
            },
            {
                number: 3,
                topic: "Общие положения",
                question: "Из каких двух неотъемлемых частей состоят настоящие Правила?",
                options: [
                    "Общие положения и Правила проведения соревнований",
                    "Спортивный кодекс и Правила дисциплин",
                    "«Организация соревнований» (Спортивный кодекс) и «Правила проведения соревнований по отдельным спортивным дисциплинам»",
                    "Общие требования и Технические требования"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 3: «Настоящие Правила состоят из двух неотъемлемых частей «Организация соревнований» (далее – Спортивный кодекс) и «Правила проведения соревнований по отдельным спортивным дисциплинам»."
            },
            {
                number: 4,
                topic: "Термины и определения",
                question: "Что понимается под термином «гонщик/спортсмен»?",
                options: [
                    "Любое лицо, участвующее в соревнованиях",
                    "Лицо, имеющее необходимую спортивную квалификацию и соответствующее разрешение на участие в тренировках и соревнованиях (лицензию спортсмена), и управляющее спортивной мототехникой",
                    "Лицо, прошедшее медицинский осмотр и технический контроль",
                    "Лицо, имеющее водительское удостоверение соответствующей категории"
                ],
                correctAnswer: 1,
                explanation: "Согласно разделу «Термины и определения»: «Гонщик/спортсмен, а также колясочник/пилот – лицо, имеющее необходимую спортивную квалификацию и соответствующее разрешение на участие в тренировках и соревнованиях (лицензию спортсмена), и управляющее спортивной мототехникой»."
            },
            {
                number: 5,
                topic: "Термины и определения",
                question: "Что такое «Закрытый парк»?",
                options: [
                    "Территория для размещения зрителей",
                    "Зона с ограниченным доступом, где хранится спортивная мототехника перед соревнованием",
                    "Предусмотренная положением (регламентом) соревнования зона с ограниченным доступом, находящаяся под контролем организатора и официальных лиц, куда гонщик обязан привести свою мототехнику на соревнованиях, для того, чтобы сохранить ее состояние неизменным",
                    "Место проведения технического контроля"
                ],
                correctAnswer: 2,
                explanation: "Согласно определению в разделе «Термины и определения»: «Закрытый парк – предусмотренная положением (регламентом) соревнования зона с ограниченным доступом, находящаяся под контролем организатора и официальных лиц, куда гонщик обязан привести свою мототехнику на соревнованиях, для того, чтобы сохранить ее состояние неизменным»."
            },
            {
                number: 6,
                topic: "Термины и определения",
                question: "Что такое «Лицензия» в контексте мотоциклетного спорта?",
                options: [
                    "Разрешение на управление транспортным средством",
                    "Свидетельство о прохождении технического контроля",
                    "Регистрационное свидетельство, выдаваемое общероссийской спортивной федерацией юридическому или физическому лицу, необходимое для участия в каком-либо качестве в соревнованиях, регламентированных настоящими Правилами",
                    "Документ о членстве в спортивном клубе"
                ],
                correctAnswer: 2,
                explanation: "Согласно определению: «Лицензия – регистрационное свидетельство, выдаваемое общероссийской спортивной федерацией юридическому или физическому лицу, необходимое для участия в каком-либо качестве в соревнованиях, регламентированных настоящими Правилами»."
            },
            {
                number: 7,
                topic: "Термины и определения",
                question: "Что такое «Спортивная санкция»?",
                options: [
                    "Награда за победу в соревновании",
                    "Мера ответственности за нарушение субъектом физической культуры и спорта настоящих Правил, положений (регламентов) спортивных соревнований, антидопинговых правил, норм и требований, соревнований",
                    "Разрешение на проведение соревнования",
                    "Финансовое поощрение спортсмена"
                ],
                correctAnswer: 1,
                explanation: "Согласно определению: «Спортивная санкция – мера ответственности за нарушение субъектом физической культуры и спорта настоящих Правил, положений (регламентов) спортивных соревнований, антидопинговых правил, норм и требований, соревнований»."
            },
            {
                number: 8,
                topic: "Характер проведения соревнований",
                question: "Какие виды соревнований по мотоциклетному спорту существуют?",
                options: [
                    "Личные и командные",
                    "Личные, командные и лично-командные",
                    "Индивидуальные и групповые",
                    "Региональные и всероссийские"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 4.1: «Соревнования по мотоциклетному спорту подразделяются на личные, командные и лично-командные»."
            },
            {
                number: 9,
                topic: "Системы соревнований",
                question: "Какие системы проведения соревнований существуют?",
                options: [
                    "Круговая и олимпийская",
                    "Прямого определения мест участников, система с выбыванием и круговая система",
                    "Система с выбыванием и круговая система",
                    "Прямой определения мест участников и система с выбыванием"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 5.1: «Соревнования по мотоциклетному спорту проводятся по системе прямого определения мест участников, по системе с выбыванием и круговой системе»."
            },
            {
                number: 10,
                topic: "Требования к месту проведения соревнования",
                question: "Где могут проводиться соревнования по мотоциклетному спорту?",
                options: [
                    "Только на специально оборудованных стадионах",
                    "Только на закрытых территориях",
                    "На объектах спорта, а также территориях (местах проведения), временных сооружениях, специально подготовленных для проведения официального спортивного соревнования, в том числе участки автомобильных дорог, площадей, улиц",
                    "Только на треках с асфальтовым покрытием"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 8: «Территория (место проведения) соревнования/ мероприятия – одна или несколько территорий, отведенных для его проведения под контролем организатора и/или владельца(-ев) данной территории, включая зоны общего доступа, места для зрителей, а также зоны ограниченного доступа. Спортивные соревнования проводятся на объектах спорта, а также территориях (местах проведения), временных сооружениях, специально подготовленных для проведения официального спортивного соревнования, в том числе участки автомобильных дорог, площадей, улиц»."
            },
            {
                number: 11,
                topic: "Безопасность",
                question: "Кто обеспечивает безопасность на соревнованиях по мотоциклетному спорту?",
                options: [
                    "Только организатор соревнований",
                    "Только главный судья соревнований",
                    "Организаторы спортивных мероприятий и физкультурных мероприятий при проведении официальных спортивных соревнований совместно с собственниками, пользователями объектов спорта мерами общественного порядка и общественной безопасности",
                    "Только спортивные судьи"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 14.2: «В соответствии с частью 1 статьи 29 Федерального закона № 329-ФЗ организаторы спортивных мероприятий и физкультурных мероприятий при проведении официальных спортивных соревнований обеспечивают совместно с собственниками, пользователями объектов спорта меры общественного порядка и общественной безопасности в соответствии с настоящим Федеральным законом и правилами обеспечения безопасности при проведении официальных спортивных соревнований, утвержденными Правительством Российской Федерации»."
            },
            {
                number: 12,
                topic: "Руководство организацией соревнований",
                question: "Кто входит в состав Жюри соревнований?",
                options: [
                    "Президент Жюри, спортивный комиссар, главный судья",
                    "Президент Жюри, главный судья, секретарь",
                    "Все спортивные судьи соревнования",
                    "Президиум ВКС и соответствующие спортивные комиссии ОСФ"
                ],
                correctAnswer: 0,
                explanation: "Согласно пункту 16.1: «В состав Жюри соревнований входят: президент Жюри, главный судья, спортивный комиссар»."
            },
            {
                number: 13,
                topic: "Руководство организацией соревнований",
                question: "Кто осуществляет высший контроль за проведением соревнования в части соблюдения Спортивного кодекса и правил?",
                options: [
                    "Директор соревнования",
                    "Жюри соревнований",
                    "Жюри соревнований, а при его отсутствии – главный судья",
                    "Исполком ОСФ"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 16.1.1: «Жюри, а при его отсутствии главный судья осуществляют высший контроль за проведением соревнования в части соблюдения Спортивного кодекса, правил, положений о соревновании, регламентов соревнований и других нормативных документов»."
            },
            {
                number: 14,
                topic: "Экологический кодекс ОСФ",
                question: "Что необходимо для работы с мотоциклетной техникой в боксах или закрытом парке согласно экологическому кодексу?",
                options: [
                    "Разрешение на использование мототехники",
                    "Наличие экологического коврика под мотоциклом",
                    "Специальная лицензия",
                    "Наличие огнетушителя"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 10.4.1: «Экологический коврик должен состоять из впитывающей верхней части и непроницаемой нижней части. Экологический коврик служит для предотвращения загрязнения почвы и воды на спортивных мероприятиях и должен использоваться: - везде, где разрешена работа с мотоциклетной техникой; - в закрытом парке; - в боксах»."
            },
            {
                number: 15,
                topic: "Экологический кодекс ОСФ",
                question: "Что необходимо для контроля за соблюдением экологических требований на соревновании?",
                options: [
                    "Назначение экологической комиссии",
                    "Наличие специальных контейнеров для сбора отходов",
                    "Назначение контролера по охране окружающей среды",
                    "Проведение экологического инструктажа"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 10.2.1: «На каждое спортивное мероприятие, организатор должен назначить контролера по охране окружающей среды. Это лицо должно успешно пройти семинар по экологии, организованный ОСФ. Задачей его будет контроль за соблюдением экологических требований при организации и проведении соревнования»."
            },
            {
                number: 16,
                topic: "Разрешение на участие в соревнованиях",
                question: "Что необходимо для участия в соревнованиях по мотоциклетному спорту?",
                options: [
                    "Водительское удостоверение соответствующей категории",
                    "Разрешение от местных органов власти",
                    "Лицензия спортсмена ОСФ",
                    "Медицинская справка и страховка"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 20.1: «Каждый спортсмен для участия в соревнованиях по мотоциклетному спорту, проходящих на территории Российской Федерации обязан иметь соответствующую именную национальную лицензию, выданную ОСФ»."
            },
            {
                number: 17,
                topic: "Участники соревнования",
                question: "Кто имеет право участвовать в соревнованиях на территории России?",
                options: [
                    "Только граждане России",
                    "Граждане России, имеющие лицензии национальных федераций других стран",
                    "Граждане России и иностранные граждане (если это предусмотрено Положением)",
                    "Только члены спортивных клубов"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 22.1: «К участию в соревнованиях, проводимых на территории России, допускаются граждане Российской Федерации и иностранные граждане (если это предусмотрено Положением или иным официальным документом о соревновании)»."
            },
            {
                number: 18,
                topic: "Спортивная дисквалификация",
                question: "Кто имеет право применять спортивную дисквалификацию?",
                options: [
                    "Главный судья соревнования",
                    "Жюри соревнования",
                    "Совет ОСФ по спорту/Исполком ОСФ",
                    "Комиссия по дисциплине мотоспорта"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 30.5: «Применение спортивной дисквалификации, в том числе временной, является исключительной прерогативой Совета ОСФ по спорту/ Исполкома ОСФ, за исключением временной спортивной дисквалификации согласно п.31.6 которая не требует специального решения»."
            },
            {
                number: 19,
                topic: "Нарушения",
                question: "Что считается нарушением Спортивного кодекса?",
                options: [
                    "Только нарушение технических требований к мототехнике",
                    "Любое непристойное поведение или действие обманного характера, или иное деяние, наносящее ущерб интересам любого соревнования или всему мотоциклетному спорту в целом",
                    "Нарушение расписания соревнования",
                    "Несоблюдение правил безопасности"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 29.2: «Нарушениями Спортивного кодекса, уставных, либо иных регламентирующих документов ОСФ, включая регламенты отдельных соревнований, признаются: Любое непристойное поведение или действие обманного характера, или иное деяние, наносящее ущерб интересам любого соревнования или всему мотоциклетному спорту в целом»."
            },
            {
                number: 20,
                topic: "Страхование",
                question: "На что обязан застраховать ответственность организатор соревнования?",
                options: [
                    "Только ответственность перед участниками",
                    "Ответственность перед третьими лицами",
                    "Ответственность, а также ответственность всех участников, производителей, гонщиков, колясочников, спонсоров, официальных и должностных лиц соревнования на случай ущерба, который может быть нанесен во время тренировок и соревнования третьим лицам или между ними",
                    "Только спортивную мототехнику"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 39.1: «Организатор соревнования обязан застраховать свою ответственность, а также ответственность всех участников, производителей, гонщиков, колясочников, спонсоров, официальных и должностных лиц соревнования на случай ущерба, который может быть нанесен во время тренировок и соревнования третьим лицам или между ними»."
            }
        ];

        // Переменные состояния
        let isLearningMode = true;
        let correctAnswers = 0;
        let examResponses = [];
        let examModeStarted = false;

        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            generateCards();
            setupEventListeners();
        });

        // Генерация карточек
        function generateCards() {
            const container = document.getElementById('cards-container');
            container.innerHTML = '';
            
            cardsData.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.dataset.index = index;
                cardElement.dataset.correct = card.correctAnswer;
                
                cardElement.innerHTML = `
                    <div class="card-number">Карточка №${card.number}</div>
                    <div class="card-topic">${card.topic}</div>
                    <div class="question">${card.question}</div>
                    <div class="options">
                        ${card.options.map((option, i) => `
                            <div class="option" data-option="${i}">${String.fromCharCode(97 + i)}. ${option}</div>
                        `).join('')}
                    </div>
                    <div class="feedback" id="feedback-${index}"></div>
                    <div class="explanation" id="explanation-${index}">
                        ${card.explanation}
                    </div>
                    <button class="show-explanation" id="btn-${index}" onclick="showExplanation(${index})">
                        Показать объяснение
                    </button>
                `;
                
                container.appendChild(cardElement);
            });
            
            // В режиме обучения показываем все объяснения
            if (isLearningMode) {
                document.getElementById('show-all-explanations').classList.remove('hidden');
                document.querySelectorAll('.explanation').forEach(el => {
                    el.classList.add('show');
                });
            }
        }

        // Настройка обработчиков событий
        function setupEventListeners() {
            // Переключение режимов
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    isLearningMode = this.dataset.mode === 'learning';
                    
                    // Сброс результатов при смене режима
                    resetResults();
                    
                    // Показать/скрыть кнопку показа всех объяснений
                    const showAllBtn = document.getElementById('show-all-explanations');
                    if (isLearningMode) {
                        showAllBtn.classList.remove('hidden');
                        document.querySelectorAll('.explanation').forEach(el => {
                            el.classList.add('show');
                        });
                    } else {
                        showAllBtn.classList.add('hidden');
                        document.querySelectorAll('.explanation').forEach(el => {
                            el.classList.remove('show');
                        });
                    }
                    
                    // Скрыть результаты экзамена если они были показаны
                    document.getElementById('exam-results').style.display = 'none';
                });
            });
            
            // Обработка выбора ответа
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const card = this.closest('.card');
                    const cardIndex = parseInt(card.dataset.index);
                    const selectedOption = parseInt(this.dataset.option);
                    const correctOption = parseInt(card.dataset.correct);
                    
                    // Убираем выделение со всех вариантов
                    card.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected', 'correct', 'incorrect');
                    });
                    
                    // Добавляем выделение выбранному варианту
                    this.classList.add('selected');
                    
                    // Показываем результат
                    const feedback = document.getElementById(`feedback-${cardIndex}`);
                    if (selectedOption === correctOption) {
                        this.classList.add('correct');
                        feedback.textContent = "✓ Верно! Ваш ответ правильный.";
                        feedback.className = "feedback correct";
                        
                        // В режиме обучения увеличиваем счетчик правильных ответов
                        if (isLearningMode) {
                            correctAnswers++;
                            updateProgress();
                        }
                        
                        // В режиме экзамена сохраняем правильный ответ
                        if (!isLearningMode && !examModeStarted) {
                            examResponses.push({ question: cardIndex, correct: true });
                        }
                    } else {
                        this.classList.add('incorrect');
                        const correctElement = card.querySelector(`.option[data-option="${correctOption}"]`);
                        correctElement.classList.add('correct');
                        feedback.textContent = "✗ Неверно. Правильный ответ показан зеленым цветом.";
                        feedback.className = "feedback incorrect";
                        
                        // В режиме экзамена сохраняем неправильный ответ
                        if (!isLearningMode && !examModeStarted) {
                            examResponses.push({ question: cardIndex, correct: false });
                            
                            // Если накопилось 50 ответов, показываем результаты
                            if (examResponses.length >= 20) {
                                showExamResults();
                            }
                        }
                    }
                    
                    // В режиме обучения сразу показываем объяснение
                    if (isLearningMode) {
                        document.getElementById(`explanation-${cardIndex}`).classList.add('show');
                        document.getElementById(`btn-${cardIndex}`).textContent = 'Скрыть объяснение';
                    }
                });
            });
            
            // Перемешивание карточек
            document.querySelector('.shuffle-btn').addEventListener('click', function() {
                shuffleCards();
            });
            
            // Сброс результатов
            document.querySelector('.reset-btn').addEventListener('click', function() {
                resetResults();
            });
            
            // Показать все объяснения
            document.getElementById('show-all-explanations').addEventListener('click', function() {
                document.querySelectorAll('.explanation').forEach(el => {
                    el.classList.toggle('show');
                });
                
                const isShowing = document.querySelectorAll('.explanation.show').length > 0;
                this.textContent = isShowing ? 'Скрыть все объяснения' : 'Показать все объяснения';
            });
            
            // Перезапуск экзамена
            document.getElementById('restart-btn').addEventListener('click', function() {
                document.getElementById('exam-results').style.display = 'none';
                resetResults();
                examModeStarted = false;
                examResponses = [];
                
                // Переключаемся в режим обучения
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                document.querySelector('.mode-btn[data-mode="learning"]').classList.add('active');
                isLearningMode = true;
                
                // Показываем все объяснения
                document.getElementById('show-all-explanations').classList.remove('hidden');
                document.querySelectorAll('.explanation').forEach(el => {
                    el.classList.add('show');
                });
            });
        }

        // Функция перемешивания карточек
        function shuffleCards() {
            const container = document.getElementById('cards-container');
            const cards = Array.from(container.children);
            
            // Перемешиваем карточки
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [cards[i], cards[j]] = [cards[j], cards[i]];
            }
            
            // Очищаем контейнер и добавляем перемешанные карточки
            container.innerHTML = '';
            cards.forEach(card => container.appendChild(card));
            
            // Сбрасываем результаты
            resetResults();
        }

        // Функция показа объяснения
        function showExplanation(cardIndex) {
            const explanation = document.getElementById(`explanation-${cardIndex}`);
            const btn = document.getElementById(`btn-${cardIndex}`);
            
            explanation.classList.toggle('show');
            btn.textContent = explanation.classList.contains('show') ? 'Скрыть объяснение' : 'Показать объяснение';
        }

        // Сброс результатов
        function resetResults() {
            correctAnswers = 0;
            updateProgress();
            
            // Сбрасываем выделение и обратную связь
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });
            
            document.querySelectorAll('.feedback').forEach(fb => {
                fb.textContent = '';
                fb.className = 'feedback';
            });
            
            // В режиме обучения показываем все объяснения
            if (isLearningMode) {
                document.querySelectorAll('.explanation').forEach(el => {
                    el.classList.add('show');
                });
                document.getElementById('show-all-explanations').textContent = 'Скрыть все объяснения';
            }
            
            // Скрываем результаты экзамена
            document.getElementById('exam-results').style.display = 'none';
        }

        // Обновление прогресса
        function updateProgress() {
            document.getElementById('progress').textContent = `Правильных ответов: ${correctAnswers} из ${cardsData.length}`;
        }

        // Показ результатов экзамена
        function showExamResults() {
            examModeStarted = true;
            
            const correctCount = examResponses.filter(r => r.correct).length;
            const incorrectCount = examResponses.length - correctCount;
            
            document.getElementById('results-summary').textContent = 
                `Вы ответили правильно на ${correctCount} из ${examResponses.length} вопросов`;
            
            const resultsDetails = document.getElementById('results-details');
            resultsDetails.innerHTML = '';
            
            // Добавляем детали по каждому вопросу
            examResponses.forEach(response => {
                const card = cardsData[response.question];
                const resultItem = document.createElement('div');
                resultItem.className = `result-item ${response.correct ? 'correct' : 'incorrect'}`;
                resultItem.innerHTML = `
                    <strong>Вопрос ${card.number} (${card.topic}):</strong> ${card.question}<br>
                    ${response.correct ? '✓ Правильный ответ' : '✗ Неправильный ответ'}
                `;
                resultsDetails.appendChild(resultItem);
            });
            
            // Показываем блок результатов
            document.getElementById('exam-results').style.display = 'block';
            
            // Прокручиваем к результатам
            document.getElementById('exam-results').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>