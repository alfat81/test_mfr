<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Правила мотоциклетного спорта 2025 - Глава VI</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #e74c3c;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --card-shadow: 0 4px 8px rgba(0,0,0,0.1);
            --border-radius: 8px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            background: var(--primary-color);
            color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }
        
        header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }
        
        .intro {
            background: white;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
        }
        
        .intro p {
            margin-bottom: 10px;
        }
        
        .mode-selector {
            margin: 20px 0;
            text-align: center;
            background: white;
            padding: 15px;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }
        
        .mode-btn {
            padding: 10px 20px;
            margin: 0 10px;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        .mode-btn:hover {
            background: #2980b9;
        }
        
        .mode-btn.active {
            background: var(--success-color);
            box-shadow: 0 0 10px rgba(39, 174, 96, 0.5);
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        button {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        button:hover {
            background: #2980b9;
        }
        
        button.reset-btn {
            background: var(--warning-color);
        }
        
        .progress {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-number {
            color: var(--secondary-color);
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.9em;
        }
        
        .card-topic {
            background: var(--secondary-color);
            color: white;
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            margin-bottom: 10px;
        }
        
        .question {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1em;
            line-height: 1.4;
        }
        
        .options {
            margin-bottom: 15px;
        }
        
        .option {
            padding: 10px;
            margin-bottom: 8px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .option:hover {
            background: #e9ecef;
            border-color: #ced4da;
        }
        
        .option.selected {
            background: #d4edda;
            border-color: #c3e6cb;
            border-left: 4px solid #28a745;
        }
        
        .option.correct {
            background: #d4edda;
            border-color: #c3e6cb;
            border-left: 4px solid #28a745;
        }
        
        .option.incorrect {
            background: #f8d7da;
            border-color: #f5c6cb;
            border-left: 4px solid #dc3545;
        }
        
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }
        
        .feedback.correct {
            background: #d4edda;
            color: #155724;
            display: block;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            display: block;
        }
        
        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: #e9ecef;
            border-radius: 4px;
            font-style: italic;
            display: none;
        }
        
        .explanation.show {
            display: block;
        }
        
        .show-explanation {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.2s;
        }
        
        .show-explanation:hover {
            background: #5a6268;
        }
        
        .exam-results {
            display: none;
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }
        
        .results-title {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .results-summary {
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        
        .results-details {
            text-align: left;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .result-item {
            padding: 8px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .result-item.correct {
            color: #28a745;
        }
        
        .result-item.incorrect {
            color: #dc3545;
        }
        
        .restart-btn {
            margin-top: 20px;
            background: var(--primary-color);
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #6c757d;
            font-size: 0.9em;
            border-top: 1px solid #dee2e6;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .cards-container {
                grid-template-columns: 1fr;
            }
            
            body {
                padding: 10px;
            }
            
            header h1 {
                font-size: 1.8em;
            }
            
            .controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Правила вида спорта "Мотоциклетный спорт" 2025</h1>
        <p>Глава VI. Положения и регламенты соревнований</p>
    </header>
    
    <div class="intro">
        <p>Данные карточки содержат вопросы по шестой главе правил мотоциклетного спорта 2025 года. Используйте их для подготовки к экзаменам и контроля знаний.</p>
    </div>
    
    <div class="mode-selector">
        <button class="mode-btn active" data-mode="learning">Режим обучения</button>
        <button class="mode-btn" data-mode="exam">Режим экзамена</button>
    </div>
    
    <div class="controls">
        <button class="shuffle-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 4h16v16H4z"/>
                <path d="M8 8l8 8"/>
                <path d="M8 16l8-8"/>
            </svg>
            Перемешать карточки
        </button>
        <button class="reset-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74.27 9.75 9.75 0 0 1 4.48 5.73M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-.27A9.89 9.89 0 0 1 3 12"></path>
            </svg>
            Сбросить результаты
        </button>
        <button id="show-all-explanations" class="hidden">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
            Показать все объяснения
        </button>
    </div>
    
    <div class="progress" id="progress">Правильных ответов: 0 из 20</div>
    
    <div class="cards-container" id="cards-container">
        <!-- Карточки будут сгенерированы JavaScript -->
    </div>
    
    <div class="exam-results" id="exam-results">
        <div class="results-title">Результаты экзамена</div>
        <div class="results-summary" id="results-summary">Вы ответили правильно на X из 20 вопросов</div>
        <div class="results-details" id="results-details">
            <!-- Детали результатов будут заполнены JavaScript -->
        </div>
        <button class="restart-btn" id="restart-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74.27 9.75 9.75 0 0 1 4.48 5.73M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-.27A9.89 9.89 0 0 1 3 12"></path>
            </svg>
            Пройти экзамен еще раз
        </button>
    </div>
    
    <footer>
        <p>Официальные правила вида спорта "Мотоциклетный спорт" на 2025 год. Утверждены приказом Министерства спорта Российской Федерации от 15 ноября 2024 г. № 1119</p>
        <p>Дата создания: 19 января 2026 года | Создано для обучения и контроля знаний</p>
    </footer>

    <script>
        // Данные для карточек
        const cardsData = [
            {
                number: 1,
                topic: "Составление положений и регламентов",
                question: "Кем составляются положения о соревнованиях и регламенты соревнований?",
                options: [
                    "Только организаторами соревнований",
                    "Соответствующей комиссией (комитетом) ОСФ совместно со ВКС ОСФ",
                    "Только Всероссийской коллегией судей",
                    "Главным судьей соревнований"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 6.1: «Положения о соревнованиях и регламенты соревнований составляются соответствующей комиссией (комитетом) ОСФ совместно со ВКС ОСФ в соответствии с нормативными правовыми актами федерального органа исполнительной власти в области физической культуры и спорта, требованиями настоящих Правил, иными локальными актами ОСФ, а при проведении международных соревнований – в соответствии с правилами ФИМ и ФИМ Европа, и утверждаются в установленном порядке»."
            },
            {
                number: 2,
                topic: "Утверждение положений",
                question: "Кем утверждаются положения о соревнованиях, включенных в Единый календарный план (ЕКП)?",
                options: [
                    "Только ОСФ",
                    "Только Министерством спорта РФ",
                    "ОСФ и федеральным органом исполнительной власти в области физической культуры и спорта",
                    "Региональными спортивными федерациями"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 6.2: «Положение о соревнованиях, включенных в Единый календарный план межрегиональных, всероссийских и международных физкультурных мероприятий и спортивных мероприятий (далее – ЕКП), утверждается ОСФ и федеральным органом исполнительной власти в области физической культуры и спорта»."
            },
            {
                number: 3,
                topic: "Регламенты соревнований",
                question: "Что должен содержать регламент на соревнования, включенные в ЕКП?",
                options: [
                    "Только основные условия проведения соревнований",
                    "Наименование и программу соревнования, ссылку на проведение соревнования в соответствии с Правилами, данные организатора, требования к участникам и условия их допуска и многое другое",
                    "Только расписание тренировок и заездов",
                    "Только порядок подачи протестов и апелляций"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 6.6.2: «Регламент должен содержать всю дополнительную информацию, касающуюся проведения конкретного соревнования по мотоциклетному спорту, в том числе: наименование и программа данного соревнования; ссылку на то, что соревнование проводится в соответствии с Правилами, утвержденными в установленном порядке; организатора соревнования с его адресом и контактными данными; место и время проведения соревнования, требования к участникам и условия их допуска, время начала и окончания приема заявок; необходимость наличия страховки гражданской ответственности; принципы подведения результатов соревнования; порядок награждения; сумму взноса за подачу протеста; длина дистанции, расписание тренировок и гонок, штрафные санкции, порядок подачи протестов и апелляций и др»."
            },
            {
                number: 4,
                topic: "Изменения в регламенте",
                question: "Когда могут вноситься изменения в регламент соревнования?",
                options: [
                    "В любой момент до окончания соревнования",
                    "Только до начала приема заявок",
                    "После начала приема заявок изменения не допускаются, за исключением случаев, если Жюри (главный судья) приняли такое решение ввиду чрезвычайных обстоятельств или по соображениям безопасности",
                    "Только по решению организатора"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 6.6.2: «После начала приема заявок изменения в регламент соревнования не допускаются, за исключением случаев, если Жюри (главный судья) приняли такое решение ввиду чрезвычайных обстоятельств или по соображениям безопасности»."
            },
            {
                number: 5,
                topic: "Приложение к регламенту",
                question: "Что является приложением к регламенту соревнования?",
                options: [
                    "Только заявочная документация",
                    "Только медицинские требования к участникам",
                    "Официальная программа соревнования",
                    "Только список участников"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 6.6.3: «Приложением к регламенту является официальная программа соревнования, которая должна включать как минимум следующую информацию: состав оргкомитета и главной судейской коллегии; список участников по заездам; расписание тренировок и заездов»."
            },
            {
                number: 6,
                topic: "После начала приема заявок",
                question: "Что запрещается после начала приема заявок на соревнования?",
                options: [
                    "Вносить изменения в положение о соревновании",
                    "Вносить изменения в регламент соревнования",
                    "Принимать дополнительные заявки",
                    "Менять состав участников"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 6.6.2: «После начала приема заявок изменения в регламент соревнования не допускаются, за исключением случаев, если Жюри (главный судья) приняли такое решение ввиду чрезвычайных обстоятельств или по соображениям безопасности»."
            },
            {
                number: 7,
                topic: "Обязательное требование",
                question: "Что является обязательным условием для участия в соревновании?",
                options: [
                    "Наличие спортивного звания",
                    "Заявка",
                    "Лицензия ОСФ",
                    "Страховка"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 6.5: «Обязательным условием для участия в соревновании является заявка (Приложение 1)»."
            },
            {
                number: 8,
                topic: "Размещение логотипа ОСФ",
                question: "Где обязательно должен размещаться логотип ОСФ на документах соревнования?",
                options: [
                    "Только в положении о соревновании",
                    "Во всех документах соревнования, проводимых ОСФ",
                    "Только в регламенте соревнования",
                    "Только в протоколах результатов"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 6.7: «Обязательно размещение логотипа ОСФ на всех документах соревнования, проводимых ОСФ»."
            },
            {
                number: 9,
                topic: "Регламенты региональных соревнований",
                question: "Кем утверждаются регламенты на региональные и муниципальные соревнования?",
                options: [
                    "Только ОСФ",
                    "Комиссией по дисциплине ОСФ",
                    "Региональными спортивными организациями и органами исполнительной власти на территории которых проводится спортивное соревнование в установленном порядке",
                    "Главным судьей соревнований"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 6.6: «Регламенты на региональные и муниципальные соревнования утверждаются региональными спортивными организациями и органами исполнительной власти на территории которых проводится спортивное соревнование в установленном порядке»."
            },
            {
                number: 10,
                topic: "Требования к регламенту",
                question: "Что регламент не должен делать?",
                options: [
                    "Содержать расписание тренировок",
                    "Содержать программу соревнования",
                    "Противоречить требованиям Спортивного кодекса, Правилам по соответствующей спортивной дисциплине мотоциклетного спорта и положению о соревновании, и не должен дублировать их в тексте регламента",
                    "Содержать порядок награждения"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 6.6.1: «Регламент не должен противоречить требованиям Спортивного кодекса, Правилам по соответствующей спортивной дисциплине мотоциклетного спорта и положению о соревновании, и не должен дублировать их в тексте регламента»."
            },
            {
                number: 11,
                topic: "Порядок приема заявок",
                question: "Кем принимаются заявки на участие в соревновании?",
                options: [
                    "Только организатором",
                    "Только комиссиями (комитетами) ОСФ",
                    "Организатор и/или комиссия (комитет) ОСФ принимает заявки на участие в соревновании, составленные по форме, являющейся приложением к Правилам",
                    "Главным судьей соревнований"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 7.1: «В соответствии со сроками, указанными в положении (регламенте) о соревновании, организатор и/или комиссия (комитет) ОСФ принимает заявки на участие в соревновании, составленные по форме, являющейся приложением к Правилам»."
            },
            {
                number: 12,
                topic: "Недействительные заявки",
                question: "Когда заявка признается недействительной?",
                options: [
                    "При несвоевременной подаче",
                    "При отсутствии страховки",
                    "При наличии неверных сведений",
                    "При отсутствии подписи заявителя"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 7.2: «Заявка, содержащая неверные сведения, признается недействительной. В этом случае организатор вправе отказать в допуске участника к соревнованию»."
            },
            {
                number: 13,
                topic: "Отбор участников",
                question: "По какому принципу производится отбор участников при превышении максимального количества допускаемых?",
                options: [
                    "По спортивной квалификации",
                    "По возрасту и стажу",
                    "По порядку поступления заявок, или жеребьевке, или иным способом по усмотрению организатора, кроме соревнований, включенных в ЕКП",
                    "По решению Жюри соревнований"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 7.3: «В случае если число полученных заявок превысит максимальное количество допускаемых участников, отбор проводится либо по порядку поступления заявок, либо жеребьевкой, или иным способом по усмотрению организатора, кроме соревнований, включенных в ЕКП. На основании полученных и отобранных заявок организатор составляет предварительный список участников»."
            },
            {
                number: 14,
                topic: "Документы для регистрации",
                question: "Какие документы должны предъявлять участники соревнования при регистрации?",
                options: [
                    "Только спортивную лицензию",
                    "Только медицинскую справку",
                    "Документы, в соответствии с требованиями настоящих Правил",
                    "Только страховой полис"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 7.4: «При регистрации участники соревнования должны предъявить документы, в соответствии с требованиями настоящих Правил»."
            },
            {
                number: 15,
                topic: "Окончательный состав участников",
                question: "Кем определяется окончательный состав участников соревнования?",
                options: [
                    "Только организатором",
                    "Только главным судьей",
                    "Жюри соревнования, а в случае отсутствия Жюри – главным судьей (главной судейской коллегией)",
                    "Комиссией ОСФ"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 7.5: «Во всех случаях окончательный состав участников определяет Жюри соревнования, а в случае отсутствия Жюри – главный судья (главная судейская коллегия)»."
            },
            {
                number: 16,
                topic: "Недопущение к участию",
                question: "Что происходит с спортсменами, команды которых не отвечают требованиям положения о соревнованиях и создают опасность для других участников?",
                options: [
                    "Им засчитываются результаты",
                    "Все материальные и иные понесенные расходы несет командировавшая их организация или сами спортсмены",
                    "Им возвращаются расходы на проезд",
                    "Они допускаются к участию в следующих соревнованиях бесплатно"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 7.6: «Если заявившиеся на участие в соревнованиях спортсмены, команды по уровню спортивной подготовки не отвечают требованиям положения о соревнованиях, правилам и/или создают опасность для других участников и, в следствие этого, не были допущены до участия в соревнованиях, то все материальные и иные понесенные расходы несет командировавшая их организация или сами спортсмены»."
            },
            {
                number: 17,
                topic: "Разрешение на участие",
                question: "Каждый спортсмен для участия в соревнованиях по мотоциклетному спорту на территории России обязан иметь:",
                options: [
                    "Только удостоверение личности",
                    "Только медицинскую справку",
                    "Соответствующую именную национальную лицензию, выданную ОСФ",
                    "Только страховой полис"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 20.1: «Каждый спортсмен для участия в соревнованиях по мотоциклетному спорту, проходящих на территории Российской Федерации обязан иметь соответствующую именную национальную лицензию, выданную ОСФ»."
            },
            {
                number: 18,
                topic: "Категории лицензий",
                question: "Как различаются спортивные лицензии ОСФ?",
                options: [
                    "Только по возрастным группам",
                    "Только по спортивным дисциплинам",
                    "По типам и категориям, которые определяются соответствующим положением, утвержденным ОСФ",
                    "Только по стажу участия в соревнованиях"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 20.2: «Спортивные лицензии ОСФ различаются по типам и категориям, которые определяются соответствующим положением, утвержденным ОСФ»."
            },
            {
                number: 19,
                topic: "Действительность лицензии",
                question: "До какого времени действительна спортивная лицензия ОСФ?",
                options: [
                    "Бессрочно",
                    "До 31 декабря года ее выдачи",
                    "До конца календарного года",
                    "До следующего соревнования"
                ],
                correctAnswer: 1,
                explanation: "Согласно пункту 20.10: «Лицензия действительна до 31 декабря года ее выдачи. Для зимних спортивных дисциплин, ОСФ может установить иной срок их действия»."
            },
            {
                number: 20,
                topic: "Предъявление лицензии",
                question: "Когда лицензия должна предъявляться по требованию официальных лиц соревнования?",
                options: [
                    "Только при регистрации",
                    "Только перед началом соревнования",
                    "Всегда с подписью ее обладателя",
                    "Только при подаче протестов"
                ],
                correctAnswer: 2,
                explanation: "Согласно пункту 20.11: «Все лица, обязанные иметь лицензию, должны предъявлять ее с подписью ее обладателя по требованию официальных или должностных лиц соревнования»."
            }
        ];

        // Переменные состояния
        let isLearningMode = true;
        let correctAnswers = 0;
        let examResponses = [];
        let examModeStarted = false;

        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            generateCards();
            setupEventListeners();
        });

        // Генерация карточек
        function generateCards() {
            const container = document.getElementById('cards-container');
            container.innerHTML = '';
            
            cardsData.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.dataset.index = index;
                cardElement.dataset.correct = card.correctAnswer;
                
                cardElement.innerHTML = `
                    <div class="card-number">Карточка №${card.number}</div>
                    <div class="card-topic">${card.topic}</div>
                    <div class="question">${card.question}</div>
                    <div class="options">
                        ${card.options.map((option, i) => `
                            <div class="option" data-option="${i}">${String.fromCharCode(97 + i)}. ${option}</div>
                        `).join('')}
                    </div>
                    <div class="feedback" id="feedback-${index}"></div>
                    <div class="explanation" id="explanation-${index}">
                        ${card.explanation}
                    </div>
                    <button class="show-explanation" id="btn-${index}" onclick="showExplanation(${index})">
                        Показать объяснение
                    </button>
                `;
                
                container.appendChild(cardElement);
            });
            
            // В режиме обучения показываем все объяснения
            if (isLearningMode) {
                document.getElementById('show-all-explanations').classList.remove('hidden');
                document.querySelectorAll('.explanation').forEach(el => {
                    el.classList.add('show');
                });
            }
        }

        // Настройка обработчиков событий
        function setupEventListeners() {
            // Переключение режимов
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    isLearningMode = this.dataset.mode === 'learning';
                    
                    // Сброс результатов при смене режима
                    resetResults();
                    
                    // Показать/скрыть кнопку показа всех объяснений
                    const showAllBtn = document.getElementById('show-all-explanations');
                    if (isLearningMode) {
                        showAllBtn.classList.remove('hidden');
                        document.querySelectorAll('.explanation').forEach(el => {
                            el.classList.add('show');
                        });
                    } else {
                        showAllBtn.classList.add('hidden');
                        document.querySelectorAll('.explanation').forEach(el => {
                            el.classList.remove('show');
                        });
                    }
                    
                    // Скрыть результаты экзамена если они были показаны
                    document.getElementById('exam-results').style.display = 'none';
                });
            });
            
            // Обработка выбора ответа
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const card = this.closest('.card');
                    const cardIndex = parseInt(card.dataset.index);
                    const selectedOption = parseInt(this.dataset.option);
                    const correctOption = parseInt(card.dataset.correct);
                    
                    // Убираем выделение со всех вариантов
                    card.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected', 'correct', 'incorrect');
                    });
                    
                    // Добавляем выделение выбранному варианту
                    this.classList.add('selected');
                    
                    // Показываем результат
                    const feedback = document.getElementById(`feedback-${cardIndex}`);
                    if (selectedOption === correctOption) {
                        this.classList.add('correct');
                        feedback.textContent = "✓ Верно! Ваш ответ правильный.";
                        feedback.className = "feedback correct";
                        
                        // В режиме обучения увеличиваем счетчик правильных ответов
                        if (isLearningMode) {
                            correctAnswers++;
                            updateProgress();
                        }
                        
                        // В режиме экзамена сохраняем правильный ответ
                        if (!isLearningMode && !examModeStarted) {
                            examResponses.push({ question: cardIndex, correct: true });
                        }
                    } else {
                        this.classList.add('incorrect');
                        const correctElement = card.querySelector(`.option[data-option="${correctOption}"]`);
                        correctElement.classList.add('correct');
                        feedback.textContent = "✗ Неверно. Правильный ответ показан зеленым цветом.";
                        feedback.className = "feedback incorrect";
                        
                        // В режиме экзамена сохраняем неправильный ответ
                        if (!isLearningMode && !examModeStarted) {
                            examResponses.push({ question: cardIndex, correct: false });
                            
                            // Если накопилось 50 ответов, показываем результаты
                            if (examResponses.length >= 20) {
                                showExamResults();
                            }
                        }
                    }
                    
                    // В режиме обучения сразу показываем объяснение
                    if (isLearningMode) {
                        document.getElementById(`explanation-${cardIndex}`).classList.add('show');
                        document.getElementById(`btn-${cardIndex}`).textContent = 'Скрыть объяснение';
                    }
                });
            });
            
            // Перемешивание карточек
            document.querySelector('.shuffle-btn').addEventListener('click', function() {
                shuffleCards();
            });
            
            // Сброс результатов
            document.querySelector('.reset-btn').addEventListener('click', function() {
                resetResults();
            });
            
            // Показать все объяснения
            document.getElementById('show-all-explanations').addEventListener('click', function() {
                document.querySelectorAll('.explanation').forEach(el => {
                    el.classList.toggle('show');
                });
                
                const isShowing = document.querySelectorAll('.explanation.show').length > 0;
                this.textContent = isShowing ? 'Скрыть все объяснения' : 'Показать все объяснения';
            });
            
            // Перезапуск экзамена
            document.getElementById('restart-btn').addEventListener('click', function() {
                document.getElementById('exam-results').style.display = 'none';
                resetResults();
                examModeStarted = false;
                examResponses = [];
                
                // Переключаемся в режим обучения
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                document.querySelector('.mode-btn[data-mode="learning"]').classList.add('active');
                isLearningMode = true;
                
                // Показываем все объяснения
                document.getElementById('show-all-explanations').classList.remove('hidden');
                document.querySelectorAll('.explanation').forEach(el => {
                    el.classList.add('show');
                });
            });
        }

        // Функция перемешивания карточек
        function shuffleCards() {
            const container = document.getElementById('cards-container');
            const cards = Array.from(container.children);
            
            // Перемешиваем карточки
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [cards[i], cards[j]] = [cards[j], cards[i]];
            }
            
            // Очищаем контейнер и добавляем перемешанные карточки
            container.innerHTML = '';
            cards.forEach(card => container.appendChild(card));
            
            // Сбрасываем результаты
            resetResults();
        }

        // Функция показа объяснения
        function showExplanation(cardIndex) {
            const explanation = document.getElementById(`explanation-${cardIndex}`);
            const btn = document.getElementById(`btn-${cardIndex}`);
            
            explanation.classList.toggle('show');
            btn.textContent = explanation.classList.contains('show') ? 'Скрыть объяснение' : 'Показать объяснение';
        }

        // Сброс результатов
        function resetResults() {
            correctAnswers = 0;
            updateProgress();
            
            // Сбрасываем выделение и обратную связь
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });
            
            document.querySelectorAll('.feedback').forEach(fb => {
                fb.textContent = '';
                fb.className = 'feedback';
            });
            
            // В режиме обучения показываем все объяснения
            if (isLearningMode) {
                document.querySelectorAll('.explanation').forEach(el => {
                    el.classList.add('show');
                });
                document.getElementById('show-all-explanations').textContent = 'Скрыть все объяснения';
            }
            
            // Скрываем результаты экзамена
            document.getElementById('exam-results').style.display = 'none';
        }

        // Обновление прогресса
        function updateProgress() {
            document.getElementById('progress').textContent = `Правильных ответов: ${correctAnswers} из ${cardsData.length}`;
        }

        // Показ результатов экзамена
        function showExamResults() {
            examModeStarted = true;
            
            const correctCount = examResponses.filter(r => r.correct).length;
            const incorrectCount = examResponses.length - correctCount;
            
            document.getElementById('results-summary').textContent = 
                `Вы ответили правильно на ${correctCount} из ${examResponses.length} вопросов`;
            
            const resultsDetails = document.getElementById('results-details');
            resultsDetails.innerHTML = '';
            
            // Добавляем детали по каждому вопросу
            examResponses.forEach(response => {
                const card = cardsData[response.question];
                const resultItem = document.createElement('div');
                resultItem.className = `result-item ${response.correct ? 'correct' : 'incorrect'}`;
                resultItem.innerHTML = `
                    <strong>Вопрос ${card.number} (${card.topic}):</strong> ${card.question}<br>
                    ${response.correct ? '✓ Правильный ответ' : '✗ Неправильный ответ'}
                `;
                resultsDetails.appendChild(resultItem);
            });
            
            // Показываем блок результатов
            document.getElementById('exam-results').style.display = 'block';
            
            // Прокручиваем к результатам
            document.getElementById('exam-results').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>